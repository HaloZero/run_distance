<head>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.10.2.min.js"></script>
  <script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBpxzAN7i8ElCOC0w3SJWmZMjrXH5WD7Dg&sensor=true">
  </script>
</head>

<style>
  #map-canvas {
    height: 100%;
    width: 100%;
  }
</style>
<body>
  <div id="map-canvas"></div>
</body>

<script type="text/javascript">


function initialize() {
  var location = new google.maps.LatLng(37.760375, -122.426877);

  var mapOptions = {
    center: location,
    zoom: 17,
    mapTypeId: google.maps.MapTypeId.ROADMAP,

  };
  var map = new google.maps.Map(document.getElementById("map-canvas"),
      mapOptions);

  setTimeout(function () {
    var marker = new google.maps.Marker({
    map:map,
    draggable:false,
    animation: google.maps.Animation.DROP,
    position: location
  });

  google.maps.event.addListener(marker, 'click', toggleBounce);
  }, 200);

 //converts to meters
  var circleOptions = {
    radius: 804672,
    center: location,
    map: map,
    strokeColor: '#FF0000',
    strokeOpacity: 0.8,
    strokeWeight: 2,
    fillColor: '#FF0000',
    fillOpacity: 0.35
  };

  var circle = new google.maps.Circle(circleOptions);

  map.fitBounds(circle.getBounds());

  var bounds = circle.getBounds();
  var NE = bounds.getNorthEast();
  var SW = bounds.getSouthWest();
  var north = NE.lat();
  var east = NE.lng();
  var south = SW.lat();
  var west = SW.lng();

  var URL = "http://localhost:9393/locations?"
  +"n="+north
  +"&s="+south
  +"&e="+east
  +"&w="+west
  console.log(URL);

  $.ajax({
    url: URL,
    contentType: "JSON",
    type: "GET"
  }).done(function(response) {
    console.log(response);
  });
}

function toggleBounce() {

  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
}

google.maps.event.addDomListener(window, 'load', initialize);


</script>